<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Isabelle LLVM Parallel</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      word-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<!--
  IMPORTANT: If you landed here from a downloaded archive file, go to html/index.html to view this page in a browsable form!
-->
<h1 id="isabelle-llvm-logo-isabelle-llvm"><img src="logo_200.png" alt="Isabelle-LLVM Logo" /> Isabelle-LLVM</h1>
<p>Isabelle-LLVM is a verification framework for Isabelle/HOL that targets LLVM as backend. The main features are:</p>
<ul>
<li>Shallowly embedded semantics of fragment of LLVM</li>
<li>Code generator, to export LLVM code</li>
<li>Generation of header files for interfacing the code from C/C++</li>
<li>Separation logic based VCG</li>
<li>Support for stepwise refinement based verification</li>
<li>Support for parallel programs</li>
</ul>
<h2 id="news">News</h2>
<ul>
<li>March 2023: added parallel partitioning algorithm</li>
<li>November 2022: ported to Isabelle 2022</li>
<li>June 2022: added support for unions</li>
<li>April 22: added support for floating point numbers</li>
<li>October 2021: added support for parallel programs</li>
<li>July 2021: <a href="https://m-fleury.github.io/isasat/isasat.html">ISASAT</a>, a fully verified SAT solver that uses Isabelle-LLVM, has won the <a href="https://www.eda-ai.org/">2021 EDA</a> Fixed CNF Encoding Race.</li>
<li>June 2021: released version 2.0. New features:
<ul>
<li>support of arbitrary structures, and pointers to structure itself (required for, e.g., linked lists)</li>
<li>faster export_llvm for big code</li>
</ul></li>
<li>Updated to work with new Isabelle 2021 version</li>
</ul>
<h2 id="getting-started">Getting Started</h2>
<p>You can <a href="Isabelle_LLVM/">browse the theories</a> or <a href="dist.tgz">download</a> the files. (The download link won’t work if you are browsing this from inside the downloaded archive!)</p>
<p>Warning: the .thy files in the download are best viewed with the <a href="https://isabelle.in.tum.de">Isabelle/HOL</a> IDE.</p>
<h3 id="git-repository">Git Repository</h3>
<p>The project is hosted on github <a href="https://github.com/lammich/isabelle_llvm/tree/2022">github.com/lammich/isabelle_llvm/tree/2022</a></p>
<h3 id="starting-points-for-browsing">Starting Points for Browsing</h3>
<p>Here are some default starting points for browsing the theories</p>
<h4 id="parallel-paper">Parallel Paper</h4>
<p>Some starting points, structured according to the parallel paper:</p>
<p><a href="Isabelle_LLVM/NEMonad.html">NE Monad</a></p>
<p><a href="Isabelle_LLVM/MMonad.html">M Monad</a> Includes the parallel combinator</p>
<p><a href="Isabelle_LLVM/Generic_Memory.html">Memory Model</a> Including access reports</p>
<p><a href="Isabelle_LLVM/Simple_Memory.html">LLVM Values stored in Memory</a></p>
<p><a href="Isabelle_LLVM/LLVM_Shallow.html">LLVM Instructions</a></p>
<p><a href="Isabelle_LLVM/LLVM_Codegen.html">Code Generator</a> Including the <a href="Isabelle_LLVM/files/par_wrapper.tmpl.ml.html">template for translating llc_par</a></p>
<p><a href="Isabelle_LLVM/LLVM_VCG_Main.html">Separation Logic and VCG</a> A bit more general than described in paper, parameterized over memory model. The general rules are proved in <a href="Isabelle_LLVM/Sep_Generic_Wp.html">Sep_Generic_Wp.thy</a>, e.g. lemma ht_par for the parallel rule. The instantiated parallel rule is ht_llc_par in <a href="Isabelle_LLVM/Sepref_Parallel.html">Sepref_Parallel.thy</a>.</p>
<p><a href="Isabelle_LLVM/Sepref.html">Sepref Tool</a> Including the parallel setup in <a href="Isabelle_LLVM/Sepref_Parallel.html">Sepref_Parallel.thy</a>.</p>
<p><a href="Examples/IICF_DS_Interval_List.html">Interval array data structure</a></p>
<p><a href="Isabelle_LLVM/IICF_Array.html#IICF_Array.WITH_SPLIT%7Cconst">With-Split Combinator</a>, <a href="Examples/IICF_Shared_Lists.html#IICF_Shared_Lists.WITH_IDXS%7Cconst">With-Idxs Combinator</a> and its <a href="Examples/IICF_DS_Array_Idxs.html#IICF_DS_Array_Idxs.hn_WITH_IDXS_aux%7Cfact">implementation on arrays</a>.</p>
<p><a href="Examples/Sorting_Export_Code.html">Sorting Algorithms</a> Contains the code export to LLVM, and the final correctness theorem. Our parallel quicksort algorithm is in <a href="Examples/Sorting_Parsort.html">Sorting_Parsort.thy</a>, the sampling pivot finder is in <a href="Examples/Sorting_Sample_Partition.html">Sorting_Sample_Partition.thy</a>, and the parallel partitioner is in <a href="Examples/Sorting_Par_Partition.html">Sorting_Par_Partition.thy</a>.</p>
<h4 id="verified-algorithms">Verified Algorithms</h4>
<p><a href="Examples/Sorting_Parsort.html">Parallel Quicksort</a></p>
<p><a href="Examples/Sorting_Introsort.html">Introsort</a></p>
<p><a href="Examples/Sorting_PDQ.html">PDQ Sort</a></p>
<p><a href="Examples/KMP.html">Knuth Morris Pratt String Search</a></p>
<p><a href="Examples/Bin_Search.html">Binary Search</a></p>
<p>For the ISA-SAT verified SAT solver, see its own <a href="https://m-fleury.github.io/isasat/isasat.html">homepage</a></p>
<h4 id="isabelle-llvm">Isabelle-LLVM</h4>
<p><a href="Isabelle_LLVM/IICF.html">IICF (Isabelle-LLVM + Refinement Framework + Collection Framework)</a></p>
<p><a href="Isabelle_LLVM/LLVM_Shallow.html">Shallow Embedding of LLVM Semantics</a></p>
<h2 id="prerequisites">Prerequisites</h2>
<ul>
<li>To compile the LLVM code: Working installation of <a href="http://releases.llvm.org/">LLVM</a> version &gt;= 10.0.0.</li>
<li>To compile the functional code: An <a href="http://mlton.org/">MLton</a> compiler version &gt;= 20100608.</li>
<li>To re-check the proofs: Working installation of <a href="https://isabelle.in.tum.de">Isabelle/HOL</a> with the <a href="https://www.isa-afp.org">Archive of Formal Proofs</a> installed as as described on <a href="https://www.isa-afp.org/using.shtml">https://www.isa-afp.org/using.shtml</a>. We require version = Isabelle-2022, which, at the time of writing, is the current version.</li>
<li>To run the regression tests: <a href="https://www.valgrind.org/">Valgrind</a> version &gt;= 3.0.0</li>
</ul>
<h2 id="compiling-and-running-benchmarks">Compiling and running benchmarks</h2>
<p>To compile and run the benchmarks</p>
<pre><code>cd benchmarks
./bench_bs.sh -r
./bench_kmp.sh -r
cd sorting
make run</code></pre>
<p>This will run the binary search, KMP, and parallel sorting benchmarks. Warning: We have only tested this on a Linux x86_64 platform so far. We do not (yet) know how LLVM will digest our code on other platforms.</p>
<h2 id="re-checking-the-proofs">Re-Checking the Proofs</h2>
<p>To re-check the proofs, run</p>
<pre><code>  cd thys 
  isabelle build -D.</code></pre>
<p>Here, <code>isabelle</code> must refer to <code>/your/path/to/Isabelle2022/bin/isabelle</code> from your Isabelle installation. This will invoke Isabelle to check all proofs and re-generate the exported code.</p>
<h3 id="regression-test-script">Regression Test Script</h3>
<p>To run a quick regression test script</p>
<pre><code>  cd regression
  make</code></pre>
<p>This will re-check the proofs, export a few example programs, link them with C wrappers, and execute them under Valgrind’s memcheck, to detect ABI problems with header file generation and interfacing exported code from C.</p>
<h2 id="talks-and-publications">Talks and Publications</h2>
<p><a href="paper_ITP2022.pdf">ITP’22 Paper</a> <a href="slides_ITP2022.pdf">Slides</a></p>
<p><a href="paper_IJCAR2020.pdf">IJCAR’2020 Paper</a> <a href="slides_IJCAR2020.pdf">Slides</a></p>
<p><a href="paper_ITP2019.pdf">ITP’2019 Paper</a> <a href="slides_ITP2019.pdf">Slides</a></p>
<p><a href="enschede2021.pdf">May 2021 Talk in Enschede</a></p>
<p><a href="RF_pres.pdf">Short Presentation of the Isabelle Refinement Framework</a></p>
<p><a href="enschede2020.pdf">Mar 2020 Talk in Enschede</a></p>
<p><a href="rennes2019.pdf">Dec 2019 Talk in Rennes</a></p>
<h2 id="old-versions">Old Versions</h2>
<p>The download links won’t work if you are browsing this from inside a downloaded archive!</p>
<p><a href="dist-2020.tgz">Isabelle-LLVM 1.0 for Isabelle-2020</a></p>
<p><a href="dist-v1.1.tgz">Isabelle-LLVM 1.1 for Isabelle-2021</a></p>
<p><a href="dist-v2.0.tgz">Isabelle-LLVM 2.0 for Isabelle-2021</a></p>
</body>
</html>
